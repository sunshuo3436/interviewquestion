package main

import (
	"fmt"
	"net"
	"time"
)

func main() {
	// 连接到 TCP 服务器
	conn, err := net.Dial("tcp", "localhost:8080")
	if err != nil {
		fmt.Println("Error connecting:", err.Error())
		return
	}
	defer conn.Close()

	// 构建测试报文
	// 报文1: 完整报文
	msg1 := []byte{
		0xaa, 0xaa, 0x00, 0x1e, 0x04, 0x32, 0x30, 0x32, 0x32, 0x30, 0x30, 0x30, 0x33, 0x32, 0x39, 0x02, 0x17, 0x09, 0x0d, 0x0a, 0x0c, 0x01, 0x01, 0x00, 0x00, 0x00, 0x64, 0x00, 0x55, 0x55, 0x55, 0x55, 0x55, 0x6a,

		//0xaa, 0xaa, 0x00, 0x0e, 0x04, 0x32, 0x30, 0x32, 0x32, 0x30, 0x30, 0x30, 0x33, 0x32, 0x39, 0x02, 0x01, 0x09,
	}

	msg1_1 := []byte{
		0xaa, 0xaa, 0x00, 0x0e, 0x04, 0x32, 0x30, 0x32, 0x32, 0x30, 0x30, 0x30, 0x33, 0x32, 0x39, 0x02, 0x01, 0x09,
	}
	// 报文2: 黏连报文
	msg2 := []byte{
		0xaa, 0xaa, 0x00, 0x1e, 0x04, 0x32, 0x30, 0x32, 0x32, 0x30, 0x30, 0x30,
		0x33, 0x32, 0x39, 0x02, 0x17, 0x09, 0x0d, 0x0a, 0x0c, 0x01, 0x01, 0x00, 0x00, 0x00, 0x64, 0x00, 0x55, 0x55, 0x55, 0x55, 0x55, 0x6a,
	}
	// 报文3: 分段报文
	msg3Part1 := []byte{
		0xaa, 0xaa, 0x00, 0x1e, 0x04, 0x32, 0x30, 0x32, 0x32, 0x30, 0x30, 0x30, 0x33, 0x32, 0x39, 0x02, 0x17, 0x09, 0x0d, 0x0a, 0x0c, 0x01, 0x01, 0x00, 0x00, 0x00, 0x64, 0x00, 0x55, 0x55, 0x55, 0x55, 0x55, 0x6a, 0xaa, 0xaa, 0x00, 0x0e, 0x04, 0x32, 0x30, 0x32, 0x32, 0x30, 0x30,
	}
	msg3Part2 := []byte{
		0x30, 0x33, 0x32, 0x39, 0x02, 0x01, 0x09,
	}

	// 发送完整报文
	conn.Write(msg1)
	time.Sleep(1 * time.Second) // 等待1秒

	conn.Write(msg1_1)
	time.Sleep(1 * time.Second) // 等待1秒

	// 发送黏连报文
	conn.Write(msg2)
	time.Sleep(1 * time.Second) // 等待1秒

	// 发送分段报文
	conn.Write(msg3Part1)
	time.Sleep(500 * time.Millisecond) // 等待0.5秒
	conn.Write(msg3Part2)
	time.Sleep(1 * time.Second) // 等待1秒
}
